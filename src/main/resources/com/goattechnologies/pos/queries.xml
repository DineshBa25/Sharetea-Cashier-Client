<?xml version="1.0" encoding="UTF-8"?>
<queries>
    <query id="getIngredients">
        SELECT *
        FROM ingredients;
    </query>
    <query id="getProductsList">
        SELECT *
        FROM products;
    </query>
    <query id="updateInventory">
        UPDATE ingredients
        SET quantity = ?
        WHERE ingredientid = ?;
    </query>
    <query id="addIngredient">
        INSERT INTO ingredients(ingredientname, quantity, cost)
        VALUES (?, ?, ?);
    </query>
    <query id="getProducts">
        SELECT productname
        FROM products
        WHERE array_length(ingredientids, 1) &gt; 1;
    </query>
    <query id="getAddOns">
        SELECT productname
        FROM products
        WHERE array_length(ingredientids, 1) &lt;= 1;
    </query>
    <query id="getProductPrice">
        SELECT price
        FROM products
        WHERE productname = ?;
    </query>
    <query id="insertOrder">
        INSERT INTO orders(orderid, cashier, transactiontime, price)
        VALUES (?, ?, ?, ?);
    </query>
    <query id="getLastOrderId">
        SELECT orderid
        FROM orders
        ORDER BY orderid DESC
        LIMIT 1;
    </query>
    <query id="useIngredients">
        UPDATE ingredients AS i
        SET quantity = i.quantity - 1
        WHERE i.ingredientid IN (
        SELECT unnest(p.ingredientids)
        FROM products AS p
        WHERE p.productname = ?
        );
    </query>
</queries>